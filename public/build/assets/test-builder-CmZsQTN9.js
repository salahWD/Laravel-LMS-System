const H="modal_sidebar",X="modal_preview";$("#editNameSubmit").click(function(){qe($("#testTitle").val())});$("#copy-link").click(function(){if(navigator.clipboard)navigator.clipboard.writeText($(this).data("value")).catch(function(){console.error("err")});else{let e=$("<input>").attr("value",$(this).data("value"));$(document.body).append(e),e.select(),document.execCommand("copy"),e.remove()}$(this).find(".text").text(__.copied),setTimeout(()=>{$(this).find(".text").text(__.copy)},1500)});$("#main_modal").on("hide.bs.modal",function(e){$e()});$("#main_modal").on("show.bs.modal",function(e){let t=JSON.parse(e.relatedTarget??e),i=t.itemType;$(this).find(".modal-title").text(t.itemName),t.type=="question"?i==1?t!=null&&t.isEdit?(de(t.data),$("#submit_modal").on("click",function(){Be(t.data.id)})):(de(),$("#submit_modal").on("click",function(){Ie()})):i==2?t!=null&&t.isEdit?(pe(t.data),$("#submit_modal").on("click",function(){Qe(t.data.id)})):(pe(),$("#submit_modal").on("click",function(){Ce(i,testType)})):i==3?t!=null&&t.isEdit?(ce(t.data),$("#submit_modal").on("click",function(){Oe(t.data.id)})):(ce(),$("#submit_modal").on("click",function(){Ae(i,testType)})):i==4?t!=null&&t.isEdit?(ue(t.data),$("#submit_modal").on("click",function(){Le(t.data.id)})):(ue(),$("#submit_modal").on("click",function(){Se(i,testType)})):i==5?t!=null&&t.isEdit?(me(t.data),$("#submit_modal").on("click",function(){Pe(t.data.id)})):(me(),$("#submit_modal").on("click",function(){Ee(i,testType)})):($e(),console.error("wrong type")):t.type=="certificate"&&i==1&&(t!=null&&t.isEdit?(fe(t.data),$("#submit_modal").on("click",function(){je(t.data.id)})):(fe(),$("#submit_modal").on("click",function(){De(t.itemType,testType)})))});const Te=[{type:1,icon:"fa-user"},{type:2,icon:"fa-user"},{type:3,icon:"fa-envelope"},{type:4,icon:"fa-phone"},{type:5,icon:"fa-bars"},{type:6,icon:"fa-align-center"},{type:7,icon:"fa-check-square-o"},{type:8,icon:"fa-caret-square-o-down"}];function ke(){$("#intro-switch").prop("checked")==!0?($("#introTitle").fadeIn(),$("#introDesc").fadeIn(),$("#introButton").fadeIn(),$("#intro-holder").slideDown()):($("#intro-holder").slideUp(),$("#introTitle").fadeOut(),$("#introDesc").fadeOut(),$("#introButton").fadeOut())}(function(){$("#intro-switch").on("input",function(){ke()});let e=document.getElementById("previewImageIntro");introImageRemove.addEventListener("click",function(){Swal.fire({title:"Are You Sure ?",customClass:{confirmButton:"btn btn-danger",cancelButton:"btn btn-primary me-4"},reverseButtons:!0,buttonsStyling:!1,showCancelButton:!0,confirmButtonText:"Delete",preConfirm:async t=>{try{const i=await fetch(intro_image_delete,{method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});return i.ok?i.json():Swal.showValidationMessage(`
              ${JSON.stringify(await i.json())}
            `)}catch(i){Swal.showValidationMessage(`
            Request failed: ${i}
          `)}}}).then(t=>{t.isConfirmed&&(introImage.value="",introImageRemove.classList.add("d-none"),e.classList.add("d-none"))})}),introImage.addEventListener("input",function(){let[t]=this.files;t?(introImageRemove.classList.remove("d-none"),e.classList.remove("d-none"),e.querySelector("img").src=URL.createObjectURL(t)):(introImage.value="",introImageRemove.classList.add("d-none"),e.classList.add("d-none"))}),$("#introTitle, #introDesc, #introButton").each(function(){$(this).on("click",function(){let t=$("#"+$(this).data("target")),i=$(this);$(this).fadeOut(100,function(){t.fadeIn(100),t.focus(),t.on("blur",function(){["introTitle","introButton"].includes(i.attr("id"))?t.val().length>0?(t.removeClass("border-danger"),i.text(t.val()),$(this).fadeOut(100,function(){i.fadeIn(100)})):t.addClass("border-danger"):(i.text(t.val()),$(this).fadeOut(100,function(){i.fadeIn(100)}))})})})}),$(".bind[data-target]").each(function(){function t(){$("#"+$(this).data("target")).text($(this).val())}$(this).data("event")?$(this).on($(this).data("event"),t):$(this).on("input",t)}),$("#save-intro").on("click",function(){var t=new FormData($("#intro-form")[0]);$.ajax({method:"POST",url:ajax_test_intro,data:t,processData:!1,contentType:!1,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(i){let a=S(__["Test Updated Successfully"]);setTimeout(()=>{a.close()},3500)},error:i=>console.error(i)})}),$("#save-result").on("click",function(){var t=new FormData($("#result-form")[0]);$.ajax({method:"POST",url:ajax_result,data:t,processData:!1,contentType:!1,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(i){let a=S(__["Test Updated Successfully"]);setTimeout(()=>{a.close()},3500)},error:i=>console.error(i)})})})();function qe(e){$.ajax({type:"POST",url:edit_test_name_route,data:{title:e},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done(function(t){$("#testTitleShow").text(e);let i=S(t);setTimeout(()=>{i.close()},5e3)})}function $e(){$("#submit_modal").off("click"),$("#sidebarOption").length>0&&$("#sidebarOption").remove(),$("#submit_modal").click(function(){var e=$(this);e.prop("disabled",!0),setTimeout(function(){e.prop("disabled",!1)},1500)}),$("#modal_sidebar").html(""),$("#modal_sidebar").show(),$("#modal_preview").html("")}function Ie(){var e=new FormData;$("#answersContainer .answer-val").each(function(i){e.append(`ar_answers[${i}][text]`,$(this).val()),e.append(`ar_answers[${i}][score]`,$("#"+$(this).attr("id")+"-score-input").val()),e.append(`ar_answers[${i}][order]`,$(this).parent().data("order"))}),e.append("_token",$('meta[name="csrf-token"]').attr("content")),e.append("type_id",1);let t=$("#imageInput").prop("files")[0];t!=null&&e.append("image",t),e.append("ar_question_title",$("#ArQuestionTitleInput").val()),e.append("ar_question_desc",$("#ArquestionDescInpiut").val()),e.append("is_multi_select",document.getElementById("multiSelect").checked==!0?1:0),e.append("order",$("#contentItemsContainer .question").length+1),$.ajax({type:"POST",method:"POST",url:questions_ajax_route,data:e,cache:!1,processData:!1,contentType:!1,success:function(i){let a=e.get(LANG+"_question_title")??e.get("ar_question_title");W($("#contentItemsContainer .question").length+1,a,i,1),$("#contentRemovableInfo").addClass("d-none"),$("#main_modal").modal("hide");let l=S(__["Question Added Successfully"]);setTimeout(()=>{l.close()},3500)},error:function(i){console.error(i);let a={ar_question_title:"EnQuestionTitleInput","ar_answers.0.text":"Answer-1","ar_answers.1.text":"Answer-2",en_question_title:"ArQuestionTitleInput","en_answers.0.text":"Answer-1-second","en_answers.1.text":"Answer-2-second"};$("#modal_sidebar input").removeClass("border border-danger"),Object.keys(i.responseJSON.errors).forEach(l=>{$("#"+a[l]).addClass("border border-danger")})}})}function Ce(){var e=new FormData;$("#answersContainer .answer-val").each(function(i){e.append(`ar_answers[${i}][text]`,$(this).val()),testType==1&&e.append(`ar_answers[${i}][score]`,$("#"+$(this).attr("id")+"-score-input").val()),e.append(`ar_answers[${i}][en_text]`,$("#"+$(this).attr("id")+"-second").val()),(e.get(`ar_answers[${i}][text]`)==null||e.get(`ar_answers[${i}][text]`)=="")&&e.get(`ar_answers[${i}][en_text]`)!=null&&e.get(`ar_answers[${i}][en_text]`)!=""&&e.append(`ar_answers[${i}][text]`,e.get(`ar_answers[${i}][en_text]`)),e.append(`ar_answers[${i}][order]`,$(this).parent().data("order"));let a=$(`#${$(this).attr("id")}-file`).prop("files")[0];a!=null&&a!="undefined"&&e.append(`ar_answers[${i}][image]`,a)});let t=$("#imageInput").prop("files")[0];t!=null&&t!="undefined"&&e.append("image",t),e.append("_token",$('meta[name="csrf-token"]').attr("content")),e.append("type_id",2),e.append("ar_question_title",$("#ArQuestionTitleInput").val()),e.append("ar_question_desc",$("#ArquestionDescInpiut").val()),e.append("is_multi_select",document.getElementById("multiSelect").checked==!0?1:0),e.append("order",$("#contentItemsContainer .question").length+1),$.ajax({type:"POST",method:"POST",url:questions_ajax_route,data:e,cache:!1,processData:!1,contentType:!1,success:function(i){let a=e.get(LANG+"_question_title")??e.get("ar_question_title");W($("#contentItemsContainer .question").length+1,a,i,2),$("#contentRemovableInfo").addClass("d-none"),$("#main_modal").modal("hide");let l=S(__["Question Added Successfully"]);setTimeout(()=>{l.close()},3500)},error:function(i){console.log(i);let a={ar_question_title:"EnQuestionTitleInput","ar_answers.0.text":"Answer-1","ar_answers.1.text":"Answer-2","ar_answers.2.text":"Answer-3","ar_answers.3.text":"Answer-4","ar_answers.4.text":"Answer-5","ar_answers.5.text":"Answer-6","ar_answers.6.text":"Answer-7","ar_answers.7.text":"Answer-8","ar_answers.8.text":"Answer-9","ar_answers.9.text":"Answer-10","ar_answers.0.image":"Answer-1-img-btn","ar_answers.1.image":"Answer-2-img-btn","ar_answers.2.image":"Answer-3-img-btn","ar_answers.3.image":"Answer-4-img-btn","ar_answers.4.image":"Answer-5-img-btn","ar_answers.5.image":"Answer-6-img-btn","ar_answers.6.image":"Answer-7-img-btn","ar_answers.7.image":"Answer-8-img-btn","ar_answers.8.image":"Answer-9-img-btn","ar_answers.9.image":"Answer-10-img-btn",en_question_title:"ArQuestionTitleInput","en_answers.0.text":"Answer-1-second","en_answers.1.text":"Answer-2-second","en_answers.2.text":"Answer-3-second","en_answers.3.text":"Answer-4-second","en_answers.4.text":"Answer-5-second","en_answers.5.text":"Answer-6-second","en_answers.6.text":"Answer-7-second","en_answers.7.text":"Answer-8-second","en_answers.8.text":"Answer-9-second","en_answers.9.text":"Answer-10-second"};$("#modal_sidebar input").removeClass("border border-danger"),Object.keys(i.responseJSON.errors).forEach(l=>{$("#"+a[l]).addClass("border border-danger")})}})}function Ae(){var e=new FormData;e.append("_token",$('meta[name="csrf-token"]').attr("content")),e.append("type_id",3);let t=$("#modal_sidebar .nav-tabs .option-link.active").data("option");if(e.append("media_type",t),t=="image"){let i=$("#imageInput").prop("files")[0];i!=null&&e.append("image",i)}else t=="video"&&e.append("video",$("#video_url_input").val());if($("#fields-holder-preview .field").length>0)$("#fields-holder-preview .field").each(function(i){$(this).data("id")!=null&&$(this).data("id")!=null&&e.append(`fields[${i}][id]`,$(this).data("id")),e.append(`fields[${i}][label]`,$(this).data("title")),e.append(`fields[${i}][type]`,$(this).data("type")),e.append(`fields[${i}][order]`,$(this).data("order")),[1,2,3,4,5,6,8].includes($(this).data("type"))&&e.append(`fields[${i}][placeholder]`,$(this).data("placeholder")),e.append(`fields[${i}][is_required]`,$(this).data("is_required")),$(this).data("type")==3&&e.append(`fields[${i}][is_lead_email]`,$(this).data("is_lead_email")),[7,8].includes($(this).data("type"))&&($(this).data("type")==7&&e.append(`fields[${i}][is_multiple_chooseing]`,$(this)[0].dataset.is_multiple_chooseing),$(this).find(".option-input").each(function(a){e.append(`fields[${i}][options][]`,$(this).val())}))});else{$("#fields-holder-preview").html("<div class='alert alert-danger'>"+__["No Fields"]+"</div>").removeClass("d-none");return}e.append("ar_question_title",$("#ArQuestionTitleInput").val()),e.append("ar_question_desc",$("#ArquestionDescInpiut").val()),e.append("ar_button_label",$("#ArQuestionButtonLabel").val()),e.append("is_skippable",$("#isSkippableCheckbox").prop("checked")),e.append("order",$("#contentItemsContainer .question").length+1),$.ajax({type:"POST",method:"POST",url:questions_ajax_route,data:e,cache:!1,processData:!1,contentType:!1,success:function(i){let a=e.get(LANG+"_question_title")??e.get("ar_question_title");W($("#contentItemsContainer .question").length+1,a,i,3),$("#contentRemovableInfo").addClass("d-none"),$("#main_modal").modal("hide");let l=S(__["Question Added Successfully"]);setTimeout(()=>{l.close()},3500)},error:function(i){console.error(i);let a={ar_button_label:"EnQuestionButtonLabel",ar_question_title:"EnQuestionTitleInput"},l={ar_button_label:"ArQuestionTitleInput",ar_question_title:"ArQuestionButtonLabel"};$("#modal_sidebar input").removeClass("border border-danger"),Object.keys(i.responseJSON.errors).forEach(o=>{$("#"+a[o]).addClass("border border-danger"),$("#"+l[o]).addClass("border border-danger")})}})}function Se(){var e=new FormData;e.append("_token",$('meta[name="csrf-token"]').attr("content")),e.append("type_id",4);let t=$("#modal_sidebar .nav-tabs .option-link.active").data("option");if(e.append("media_type",t),t=="image"){let i=$("#imageInput").prop("files")[0];i!=null?e.append("image",i):e.append("media_type","no")}else t=="video"&&($("#video_url_input").val()!=""?e.append("video",$("#video_url_input").val()):e.append("media_type","no"));e.append("ar_question_title",$("#ArQuestionTitleInput").val()),e.append("ar_question_desc",$("#ArquestionDescInpiut").val()),e.append("ar_button_label",$("#ArQuestionButtonLabel").val()),e.append("order",$("#contentItemsContainer .question").length+1),$.ajax({type:"POST",method:"POST",url:questions_ajax_route,data:e,cache:!1,processData:!1,contentType:!1,success:function(i){let a=e.get(LANG+"_question_title")??e.get("ar_question_title");W($("#contentItemsContainer .question").length+1,a,i,4),$("#contentRemovableInfo").addClass("d-none"),$("#main_modal").modal("hide");let l=S(__["Question Added Successfully"]);setTimeout(()=>{l.close()},3500)},error:function(i){console.log(i);let a={ar_question_title:"EnQuestionTitleInput",ar_button_label:"EnQuestionButtonLabel",image:"image-option"},l={ar_question_title:"ArQuestionTitleInput",ar_button_label:"ArQuestionButtonLabel"};$("#modal_sidebar input").removeClass("border border-danger"),Object.keys(i.responseJSON.errors).forEach(o=>{$("#"+a[o]).addClass("border border-danger"),$("#"+l[o]).addClass("border border-danger")})}})}function Ee(){var e=new FormData;e.append("_token",$('meta[name="csrf-token"]').attr("content")),e.append("order",$("#contentItemsContainer .question").length+1),e.append("type_id",5);let t=$("#imageInput").prop("files")[0];t!=null&&e.append("image",t),e.append("ar_question_title",$("#ArQuestionTitleInput").val()),e.append("ar_question_desc",$("#ArquestionDescInpiut").val()),e.append("score",$("#questionScoreInput").val()),e.append("is_skippable",$("#is_skippable").prop("checked")),e.append("answer_equation",Guppy("answer_equation").engine.get_content("xml")),e.append("answer_equation_formula",Guppy("answer_equation").engine.get_content("text")),e.append("answer_decimals",$("#answer_decimals").val()),$("#equation-variables-container .variable").each(function(i){e.append(`variables[${i}][decimal]`,$(this).find(".decimal").val()),e.append(`variables[${i}][min]`,$(this).find(".min").val()),e.append(`variables[${i}][max]`,$(this).find(".max").val()),e.append(`variables[${i}][name]`,$(this).data("var"))}),$.ajax({type:"POST",method:"POST",url:questions_ajax_route,data:e,cache:!1,processData:!1,contentType:!1,success:function(i){W($("#contentItemsContainer .question").length+1,e.get("ar_question_title"),i,5),$("#contentRemovableInfo").addClass("d-none"),$("#main_modal").modal("hide");let a=S(__["Question Added Successfully"]);setTimeout(()=>{a.close()},3500)},error:function(i){console.log(i);let a={question_title:"ArQuestionTitleInput",image:"image-option"};$("#modal_sidebar input").removeClass("border border-danger"),Object.keys(i.responseJSON.errors).forEach(l=>{$("#"+a[l]).addClass("border border-danger")})}})}function De(){var e=new FormData;e.append("_token",$('meta[name="csrf-token"]').attr("content")),e.append("certificate_id",$("#availableCertificates").val()),e.append("ar_title",$("#certificateTitleInput").val()),e.append("ar_desc",$("#certificateDescriptionInput").val()),e.append("theme",$("#certificateTheme").val()),$.ajax({type:"POST",method:"POST",url:ajax_create_certificate_route,data:e,cache:!1,processData:!1,contentType:!1,success:function(t){if(t.status==!0){$("#certificateRemovableInfo").addClass("d-none"),$(".questions-sidebar .item.draggable-result[data-item='1'").css("opacity","0.25").attr("draggable","false"),$("#main_modal").modal("hide"),Ve(t.title,t.id);let i=S(__["Result has been duplicated"]);setTimeout(()=>{i.close()},5e3)}},error:function(t){console.error(t);let i=F(__["Somthing Went Wrong !!"]);setTimeout(()=>{i.close()},5e3)}})}function Be(e){var t=new FormData;$("#answersContainer .answer-val").each(function(a){t.append(`ar_answers[${a}][id]`,$(this).data("id")),t.append(`ar_answers[${a}][text]`,$(this).val()),t.append(`ar_answers[${a}][score]`,$("#"+$(this).attr("id")+"-score-input").val()),t.append(`ar_answers[${a}][order]`,$(this).parent().data("order")),$(this).data("action")!=null&&t.append(`ar_answers[${a}][action]`,$(this).data("action"))}),t.append("ar_question_title",$("#ArQuestionTitleInput").val()),t.append("ar_question_desc",$("#ArquestionDescInpiut").val()),t.append("type_id",1),t.append("_token",$('meta[name="csrf-token"]').attr("content"));let i=$("#imageInput").prop("files")[0];i!=null&&t.append("image",i),t.append("is_multi_select",document.getElementById("multiSelect").checked==!0?1:0),$.ajax({type:"POST",method:"POST",url:`${question_ajax_route}/${e}`,data:t,cache:!1,processData:!1,contentType:!1,success:function(a){let l=[null,"","undefined"].includes(t.get(LANG+"_question_title"))?t.get("ar_question_title"):t.get(LANG+"_question_title");$(`#question-${e}-title`).text(l),$("#main_modal").modal("hide");let o=S(__["Question Updated Successfully"]);setTimeout(()=>{o.close()},3500)},error:function(a){console.error(a);let l=F("Can't Update This Question");setTimeout(()=>{l.close()},3500);for(let o in a.responseJSON.errors)console.error(o)}})}function Qe(e){var t=new FormData;$("#answersContainer .answer-val").each(function(a){t.append(`ar_answers[${a}][id]`,$(this).data("id")),t.append(`ar_answers[${a}][text]`,$(this).val()),t.append(`ar_answers[${a}][score]`,$("#"+$(this).attr("id")+"-score-input").val()),t.append(`ar_answers[${a}][order]`,$(this).parent().data("order")),$(this).data("action")!=null&&t.append(`ar_answers[${a}][action]`,$(this).data("action")),t.append(`ar_answers[${a}][image]`,$(`#${$(this).attr("id")}-file`).prop("files")[0])}),t.append("ar_question_title",$("#ArQuestionTitleInput").val()),t.append("ar_question_desc",$("#ArquestionDescInpiut").val()),t.append("_token",$('meta[name="csrf-token"]').attr("content")),t.append("type_id",2);let i=$("#imageInput").prop("files")[0];i!=null&&t.append("image",i),t.append("is_multi_select",document.getElementById("multiSelect").checked==!0?1:0),$.ajax({type:"POST",method:"POST",url:`${question_ajax_route}/${e}`,data:t,cache:!1,processData:!1,contentType:!1,success:function(a){let l=t.get("ar_question_title");$(`#question-${e}-title`).text(l),$("#main_modal").modal("hide");let o=S(__["Question Updated Successfully"]);setTimeout(()=>{o.close()},3500)},error:function(a){let l=F("Can't Update This Question");setTimeout(()=>{l.close()},3500);for(let o in a.responseJSON.errors)console.error(o)}})}function Oe(e){var t=new FormData;t.append("ar_question_title",$("#ArQuestionTitleInput").val()),t.append("ar_question_desc",$("#ArquestionDescInpiut").val()),t.append("ar_button_label",$("#ArQuestionButtonLabel").val()),t.append("_token",$('meta[name="csrf-token"]').attr("content")),t.append("type_id",3);let i=$("#modal_sidebar .nav-tabs .option-link.active").data("option");if(t.append("media_type",i),i=="image"){let a=$("#imageInput").prop("files")[0];a!=null&&t.append("image",a)}else i=="video"&&t.append("video",$("#video_url_input").val());if($("#fields-holder-preview .field").length>0)$("#fields-holder-preview .field").each(function(a){$(this).data("id")!=null&&$(this).data("id")!=null&&t.append(`fields[${a}][id]`,$(this).data("id")),t.append(`fields[${a}][label]`,$(this).data("title")),t.append(`fields[${a}][type]`,$(this).data("type")),t.append(`fields[${a}][order]`,$(this).data("order")),[1,2,3,4,5,6,8].includes($(this).data("type"))&&t.append(`fields[${a}][placeholder]`,$(this).data("placeholder")),t.append(`fields[${a}][is_required]`,$(this).data("is_required")),$(this).data("type")==3&&t.append(`fields[${a}][is_lead_email]`,$(this).data("is_lead_email")),[7,8].includes($(this).data("type"))&&($(this).data("type")==7&&t.append(`fields[${a}][is_multiple_chooseing]`,$(this)[0].dataset.is_multiple_chooseing),$(this).find(".option-input").each(function(l){t.append(`fields[${a}][options][]`,$(this).val())}))});else{$("#fields-holder-preview").html("<div class='alert alert-danger'>"+__["No Fields"]+"</div>").removeClass("d-none");return}t.append("is_skippable",$("#isSkippableCheckbox").prop("checked")),$.ajax({type:"POST",method:"POST",url:`${question_ajax_route}/${e}`,data:t,cache:!1,processData:!1,contentType:!1,success:function(a){let l=t.get("ar_question_title");$(`#question-${e}-title`).text(l),$("#main_modal").modal("hide");let o=S(__["Question Updated Successfully"]);setTimeout(()=>{o.close()},3500)},error:function(a){let l=F("Can't Update This Question");if(setTimeout(()=>{l.close()},3500),a.responseJSON!=null&&a.responseJSON.errors!=null){let o={ar_button_label:"EnQuestionButtonLabel",ar_question_title:"EnQuestionTitleInput"},h={ar_button_label:"ArQuestionButtonLabel",ar_question_title:"ArQuestionTitleInput"};$("#modal_sidebar input").removeClass("border border-danger"),Object.keys(a.responseJSON.errors).forEach(s=>{$("#"+o[s]).addClass("border border-danger"),$("#"+h[s]).addClass("border border-danger")})}}})}function Le(e){var t=new FormData;t.append("_token",$('meta[name="csrf-token"]').attr("content")),t.append("type_id",4),t.append("ar_question_title",$("#ArQuestionTitleInput").val()),t.append("ar_question_desc",$("#ArquestionDescInpiut").val()),t.append("ar_button_label",$("#ArQuestionButtonLabel").val());let i=$("#modal_sidebar .nav-tabs .option-link.active").data("option");if(t.append("media_type",i),i=="image"){let a=$("#imageInput").prop("files")[0];a!=null&&t.append("image",a)}else i=="video"&&t.append("video",$("#video_url_input").val());$.ajax({type:"POST",method:"POST",url:`${question_ajax_route}/${e}`,data:t,cache:!1,processData:!1,contentType:!1,success:function(a){$(`#question-${e}-title`).text(t.get("ar_question_title")),$("#main_modal").modal("hide");let l=S(__["Question Updated Successfully"]);setTimeout(()=>{l.close()},3500)},error:function(a){let l=F("Can't Update This Question");setTimeout(()=>{l.close()},3500);for(let o in a.responseJSON.errors)console.error(o)}})}function Pe(e){var t=new FormData;t.append("_token",$('meta[name="csrf-token"]').attr("content")),t.append("type_id",5);let i=$("#imageInput").prop("files")[0];i!=null&&t.append("image",i),t.append("ar_question_title",$("#ArQuestionTitleInput").val()),t.append("ar_question_desc",$("#ArquestionDescInpiut").val()),t.append("score",$("#questionScoreInput").val()),t.append("is_skippable",$("#is_skippable").prop("checked")),t.append("answer_equation",Guppy("answer_equation").engine.get_content("xml")),t.append("answer_equation_formula",Guppy("answer_equation").engine.get_content("text")),t.append("answer_decimals",$("#answer_decimals").val()),$("#equation-variables-container .variable").each(function(a){t.append(`variables[${a}][decimal]`,$(this).find(".decimal").val()),t.append(`variables[${a}][min]`,$(this).find(".min").val()),t.append(`variables[${a}][max]`,$(this).find(".max").val()),t.append(`variables[${a}][name]`,$(this).data("var"))}),$.ajax({type:"POST",method:"POST",url:`${question_ajax_route}/${e}`,data:t,cache:!1,processData:!1,contentType:!1,success:function(a){$(`#question-${e}-title`).text(t.get("ar_question_title")),$("#main_modal").modal("hide");let l=S(__["Question Updated Successfully"]);setTimeout(()=>{l.close()},3500)},error:function(a){let l=F("Can't Update This Question");setTimeout(()=>{l.close()},3500);for(let o in a.responseJSON.errors)console.error(o)}})}function je(e){var t=new FormData;t.append("_token",$('meta[name="csrf-token"]').attr("content")),t.append("ar_title",$("#certificateTitleInput").val()),t.append("ar_desc",$("#certificateDescriptionInput").val()),t.append("theme",$("#certificateTheme").val()),$.ajax({type:"POST",method:"POST",url:`${certificate_ajax_route}/${e}`,data:t,cache:!1,processData:!1,contentType:!1,success:function(i){if(i.status==!0){$("#result-"+e+"-title").text($("#certificateTitleInput").val()),$("#main_modal").modal("hide");let a=S(__["Certificate Updated Successfully"]);setTimeout(()=>{a.close()},5e3)}},error:function(i){console.error(i);let a=F(__["Somthing Went Wrong !!"]);setTimeout(()=>{a.close()},5e3)}})}function Ne(e){$.ajax({method:"POST",url:`${question_ajax_route}/${e}/delete`,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{question:e},success:function(t){$(`#question-${e}`).fadeOut(150,function(){$(this).remove(),$("#contentItemsContainer .question").length==0&&$("#contentRemovableInfo").removeClass("d-none")});let i=S(__["Question Deleted Successfully"]);setTimeout(()=>{i.close()},5e3)},error:function(t){console.error(t);let i=F(__["Somthing Went Wrong !!"]);setTimeout(()=>{i.close()},5e3)}})}function Re(e){$.ajax({method:"POST",url:ajax_delete_certificate_route,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(t){$(`#result-${e}`).fadeOut(150,function(){$(this).remove(),$("#certificatesContainer .result").length==0&&$("#certificateRemovableInfo").removeClass("d-none")}),$(".questions-sidebar .item.draggable-result[data-item='1'").css("opacity","1").attr("draggable","true");let i=S(__["Certificate Deleted Successfully"]);setTimeout(()=>{i.close()},5e3)},error:function(t){console.error(t);let i=F(__["Somthing Went Wrong !!"]);setTimeout(()=>{i.close()},5e3)}})}function Fe(e){$.ajax({method:"POST",url:`${question_ajax_route}/${e}/copy`,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{question:e},success:function(t){let i=$("#contentItemsContainer .question").length+1,a=$(`#question-${e}-title`).text(),l=$("#question-"+e).data("type");W(i,a,t,l);let o=S(__["Question has been duplicated"]);setTimeout(()=>{o.close()},5e3)},error:function(t){console.error(t);let i=F(__["Somthing Went Wrong !!"]);setTimeout(()=>{i.close()},5e3)}})}function Ue(e){$.ajax({method:"GET",url:`${question_ajax_route}/${e}`,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(t){let i=`Edit (${t.title})`;LANG=="ar"&&(i=`تعديل (${t.title})`);let a=JSON.stringify({itemType:t.type,type:"question",itemName:i,isEdit:!0,data:t});$("#main_modal").modal("show",a)},error:function(t){console.error(t);let i=F(__["you can't edit this Question ):"]);setTimeout(()=>{i.close()},5e3)}})}function Je(e){$.ajax({method:"GET",url:`${certificate_ajax_route}/${e}`,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(t){let i=`تعديل (${t.title})`;LANG=="en"&&(i=`Edit (${t.title})`);let l=JSON.stringify({itemName:i,isEdit:!0,type:"certificate",itemType:1,data:t});$("#main_modal").modal("show",l)},error:function(t){console.error(t);let i=F(__["you can't edit this Result ):"]);setTimeout(()=>{i.close()},5e3)}})}function z(e,t=null){let i=document.getElementById("answersContainer"),a=n("div",{class:"input-group answer mb-2",id:`answer-${e}`,draggable:"true","data-order":e});i.append(a);let l=n("span",{class:"input-group-text grabable answer-order-handler"},'<i class="fa fa-list-ul"></i></span>');a.append(l);var o=n("input",{type:"text",id:`Answer-${e}`,class:"form-control answer-val",placeholder:"Answer","data-target":`Answer-${e}-preview`,value:t!=null&&t.text!=null?t.text:"","data-id":t!=null&&t.id!=null?t.id:""});a.append(o);let h=n("input",{type:"number",id:`Answer-${e}-score-input`,class:"form-control",placeholder:"score",value:t!=null&&t.score!=null?t.score:""});a.append(h);let s=n("button",{id:`Answer-${e}-delete-btn`,class:"input-group-text btn bg-white text-danger border",tabindex:"-1"},'<i class="fa fa-trash"></i>');a.append(s);let u=t!=null&&t.text!=null?"answer":"answer d-none",c=n("div",{class:u}),m=n("div",{class:"highlight"});c.append(m);let f=n("div",{class:"answer-letter"},"A");c.append(f);var d=n("p",{class:"text m-0",id:`Answer-${e}-preview`},t!=null&&t.text!=null?t.text:"");c.append(d),document.getElementById("answersContainerPreview").append(c),$(s).click(function(){$(i).find(".answer").length>2&&(o.dataset.id!=""?$(a).fadeOut(150,function(){o.dataset.action="remove"}):$(a).fadeOut(150,function(){$(this).remove()}),$(`#${o.dataset.target}`).parent().fadeOut(150,function(){$(this).remove()}))}),le(o),typeof answerInputSecond<"u"&&le(answerInputSecond)}function re(e,t=null){let i=document.getElementById("equation-variables-container"),a=n("div",{class:"input-group variable mb-2","data-var":e,id:`variable-${e}`});i.append(a);let l=n("div",{class:"input-group-prepend"});a.append(l),l.append(n("span",{class:"input-group-text bg-secondary rounded-0"},e.replaceAll(/[\[\]]/gi,"").toUpperCase())),a.append(n("input",{type:"number",class:"form-control decimal",placeholder:"decimals",value:t!=null&&t.decimal!=null?t.decimal:""})),a.append(n("input",{type:"number",class:"form-control min",placeholder:"min",value:t!=null&&t.min_range!=null?t.min_range:""})),a.append(n("input",{type:"number",class:"form-control max",placeholder:"max",value:t!=null&&t.max_range!=null?t.max_range:""}))}function Y(e,t=null){const i="default.svg";let a=document.getElementById("answersContainer"),l=n("div",{class:"answer-holder"});a.append(l);let o=n("div",{class:"input-group answer mb-2",id:`answer-${e}`,draggable:"true","data-order":e});l.append(o);let h=n("span",{class:"input-group-text grabable answer-order-handler"},'<i class="fa fa-list-ul"></i></span>');o.append(h);var s;{var s=n("input",{type:"text",id:`Answer-${e}`,class:"form-control answer-val answer-primary",placeholder:"Answer","data-target":`Answer-${e}-preview`,value:t!=null&&t.text!=null?t.text:"","data-id":t!=null&&t.id!=null?t.id:""});o.append(s)}let u=n("input",{type:"number",id:`Answer-${e}-score-input`,class:"form-control flex-shrink-2",placeholder:"score",value:t!=null&&t.score!=null?t.score:""});o.append(u);let c=n("input",{type:"file",accept:".png, .jpg, .jpeg",id:`Answer-${e}-file`,class:"d-none"});o.append(c);let m=n("button",{class:"btn btn-white border",type:"file",id:`Answer-${e}-img-btn`,onclick:"document.getElementById('Answer-"+e+"-file').click()"},"<i class='fa fa-picture-o'></i>");o.append(m),imgSize={x:200,y:200};let f=n("button",{id:`Answer-${e}-delete-btn`,class:"input-group-text btn bg-white text-danger border",tabindex:"-1"},'<i class="fa fa-trash"></i>');o.append(f);let d=t!=null&&t.text!=null?"answer img-answer card border-0":"answer img-answer card border-0 d-none",r=n("div",{class:d,style:`min-width: ${imgSize.x}px`}),w=n("div",{class:"highlight rounded"});r.append(w);let b=n("img",{class:"img card-img-top",src:`${public_route}/images/questions/${t==null?i:t.image}`,width:imgSize.x,height:imgSize.y});r.append(b);let y=n("p",{class:"text m-0",id:`Answer-${e}-preview`},t!=null&&t.text!=null?t.text:"");r.append(y),document.getElementById("answersContainerPreview").append(r),$(f).click(function(){$(a).find(".answer").length>2&&(s.dataset.id!=""?$(o).fadeOut(150,function(){s.dataset.action="remove"}):$(o).fadeOut(150,function(){$(this).remove()}),$(`#${s.dataset.target}`).parent().fadeOut(150,function(){$(this).remove()}))}),le(s),c.addEventListener("change",function(){let[_]=this.files;_&&(b.src=URL.createObjectURL(_))})}function W(e,t,i,a=1){a=parseInt(a);let l=document.getElementById("contentItemsContainer"),o=n("div",{class:"question",id:`question-${i}`,"data-id":`${i}`,"data-type":`${a}`,"data-order":`${e}`});l.append(o);let h=n("div",{class:"order"},`<b>${e}</b>`);o.append(h);let s=n("div",{class:"body border"});o.append(s);let u=n("div",{class:"title"});s.append(u);let c=n("b",{});u.append(c);let m=n("i",{class:`icon fa ${questions_types[a-1].icon}`});c.append(m);let f=n("span",{id:`${o.id}-title`},t);c.append(f);let d=n("ul",{class:"actions"});s.append(d);let r=n("li",{});d.append(r);let w=n("button",{class:"btn action-btn px-1",id:`Q-${e}-edit`});r.append(w),$(w).click(function(){var k=$(this);k.prop("disabled",!0),setTimeout(function(){k.prop("disabled",!1)},1500),Ue($(o).data("id"))});let b=n("i",{class:"fa fa-pencil",title:"Edit Element",id:`Q-${e}-edit`});w.append(b);let y=n("li",{});d.append(y);let _=n("button",{class:"btn action-btn px-1",id:`Q-${e}-copy`});y.append(_),$(_).click(function(){var k=$(this);k.prop("disabled",!0),setTimeout(function(){k.prop("disabled",!1)},1500),Fe($(o).data("id"))});let Q=n("i",{class:"fa fa-copy",title:"Copy"});_.append(Q);let T=n("li",{});d.append(T);let v=n("button",{class:"btn action-btn px-1",id:`Q-${e}-delete`});T.append(v),$(v).click(function(){var k=$(this);k.prop("disabled",!0),setTimeout(function(){k.prop("disabled",!1)},1500),Ne($(o).data("id"))});let x=n("i",{class:"fa fa-trash-o",title:"Delete Element"});v.append(x);let q=n("li",{class:"handler-questions"});d.append(q);let E=n("button",{class:"btn action-btn px-1"});q.append(E);let L=n("i",{class:"fa fa-arrows handler-questions",title:"Reorder Element",id:`Q-${e}-reorder`});E.append(L)}function Ve(e,t,i=1){let a=document.getElementById("certificatesContainer"),l=n("div",{class:"result",id:`result-${t}`,"data-id":t});a.append(l);let o=n("div",{class:"body border"});l.append(o);let h=n("div",{class:"title"});o.append(h);let s=n("b",{});h.append(s);let u=n("i",{class:`icon fa ${results_types[i-1].icon}`});s.append(u);let c=n("span",{id:`${l.id}-title`},e);s.append(c);let m=n("ul",{class:"actions py-2"});o.append(m);let f=n("li",{});m.append(f);let d=n("button",{class:"btn action-btn px-1",id:`Q-${t}-edit`});f.append(d),$(d).click(function(){var _=$(this);_.prop("disabled",!0),setTimeout(function(){_.prop("disabled",!1)},1500),Je($(l).data("id"))});let r=n("i",{class:"fa fa-pencil",title:"Edit Element",id:`Q-${t}-edit`});d.append(r);let w=n("li",{});m.append(w);let b=n("button",{class:"btn action-btn px-1",id:`Q-${t}-delete`});w.append(b),$(b).click(function(){var _=$(this);_.prop("disabled",!0),setTimeout(function(){_.prop("disabled",!1)},1500),Re($(l).data("id"))});let y=n("i",{class:"fa fa-trash-o",title:"Delete Element"});b.append(y)}function he(e){let{count:t,type:i,label:a,placeholder:l="",is_required:o=0,id:h,options:s=[],is_lead_email:u="",is_multiple_chooseing:c="",hidden_value:m=""}=e;i=parseInt(i);let f=document.getElementById("fields-holder-preview"),d={class:"field",id:`field-${t}`,"data-type":i,"data-order":t,"data-title":a};if(d["data-is_required"]=o,[1,2,3,4,5,6,8].includes(i)&&(d["data-placeholder"]=l),i==7&&e!=null&&e.is_multiple_chooseing!=null?d["data-is_multiple_chooseing"]=c:d["data-is_multiple_chooseing"]=0,i==3){let I=$(f).find('.field[data-type="3"]');I.length>0&&u==1&&I.each(function(g){$(this)[0].dataset.is_lead_email=0}),d["data-is_lead_email"]=u??0}h!=null&&(d["data-id"]=h);let r=n("div",d);f.append(r);let w=n("div",{class:"order"},`<b>${t}</b>`);r.append(w);let b=n("div",{class:"body border"});r.append(b),[7,8].includes(i)&&s!=null&&s.length>0&&s.forEach(I=>{r.append(n("input",{class:"option-input",type:"hidden",value:I}))});let y=n("div",{class:"title"});b.append(y);let _=n("b",{});y.append(_);let Q=n("i",{class:`icon fa ${Te[i-1].icon}`});_.append(Q);let T=n("span",{id:`${r.id}-title`},a);_.append(T);let v=n("ul",{class:"actions"});b.append(v);let x=n("li",{});v.append(x);let q=n("button",{class:"btn action-btn px-1",id:`Q-${t}-edit`});x.append(q),$(q).click(function(){var I=$(this);I.prop("disabled",!0),setTimeout(function(){I.prop("disabled",!1)},1500);let g={label:r.dataset.title,placeholder:r.dataset.placeholder,is_required:r.dataset.is_required,id:r.id};if(i==3&&(g.is_lead_email=r.dataset.is_lead_email),i==7&&(g.is_multiple_chooseing=r.dataset.is_multiple_chooseing),[7,8].includes(i)){let j=$(r).find(".option-input");g.options=[],j!=null&&j.length>0&&j.each(function(O){g.options.push($(this).val())})}ge(i,g)});let E=n("i",{class:"fa fa-pencil",title:"Edit Element",id:`Q-${t}-edit`});q.append(E);let L=n("li",{});v.append(L);let k=n("button",{class:"btn action-btn px-1",id:`Q-${t}-delete`});L.append(k),$(k).click(function(){var I=$(this);I.prop("disabled",!0),setTimeout(function(){I.prop("disabled",!1)},1500),I.parents(".field").remove()});let N=n("i",{class:"fa fa-trash-o",title:"Delete Element"});k.append(N);let R=n("li",{class:"handler-field"});v.append(R);let C=n("button",{class:"btn action-btn px-1"});R.append(C);let P=n("i",{class:"fa fa-arrows",title:"Reorder Element",id:`Q-${t}-reorder`});return C.append(P),d.id}function de(e=null){var t=0;let i=document.getElementById(H),a=n("div",{});i.append(a),attrs={type:"file",id:"imageInput",class:"d-none","data-target":"img-preview",accept:".jpg,.png,.jpeg"};let l=n("input",attrs);a.append(l);let o=n("p",{},__["Add Image:"]);a.append(o);let h=n("button",{type:"button",class:"btn btn-success",onclick:"imageInput.click()"},__["Upload Image"]);a.append(h),a.append(n("button",{type:"button",id:"removeImage",class:e!=null&&e.image!=null?"btn btn-danger mx-2":"btn btn-danger mx-2 d-none"},'<i class="fa fa-trash"></i>'));var s,u;{let g=n("div",{class:"my-3"});i.append(g);let j=n("label",{class:"mb-2",for:"ArQuestionTitleInput"},"question title *");g.append(j);var s=n("input",{type:"text",class:"form-control",id:"ArQuestionTitleInput",placeholder:"Enter A Title",maxlength:"400","data-target":"questionTitlePreview",value:e!=null?e.title:""});g.append(s);let D=n("div",{class:"mb-3"});i.append(D);let G=n("label",{class:"mb-2",for:"ArquestionDescInpiut"},"question description");D.append(G);var u=n("textarea",{class:"form-control",id:"ArquestionDescInpiut",placeholder:"Enter a Description",maxlength:"400","data-target":"questionDescPreview"},e!=null?e.description:"");D.append(u)}let c=n("div",{class:"mb-3"});i.append(c);let m=n("label",{class:"mb-1"},__["Answers:"]);c.append(m);let f=n("div",{class:"answers-order-container list-group",id:"answersContainer"});c.append(f);let d=n("button",{type:"button",id:"addAnswerBtn",class:"btn btn-secondary",placeholder:"Answer"},`${__["Add Answer"]} <i style="margin-left: 8px" class="fa fa-plus"></i>`);c.append(d);let r=n("div",{class:"mb-3"});i.append(r);let w=n("h5",{class:"title"},__.SETTING);r.append(w);let b=n("div",{class:"form-check form-switch p-0 my-4 d-flex gap-3"});r.append(b);let y=n("label",{class:"form-check-label",for:"multiSelect"},__["Allow multiple choices:"]);b.append(y);let _={class:"form-check-input mx-0 float-none",type:"checkbox",role:"switch",id:"multiSelect","data-target":"nextQuestionBtn"};e!=null&&e.is_multi_select!=null&&e.is_multi_select==1&&(_.checked=e.is_multi_select);let Q=n("input",_);b.append(Q);let T=document.getElementById(X),v=n("div",{class:"container-floued h-100"});T.append(v);let x=n("div",{class:"d-flex h-100 flex-column justify-content-center py-4 px-5 m-auto"});v.append(x);let q=e!=null&&e.title!=null?"question":"question d-none",E=n("span",{class:q,id:"questionTitlePreview"},e!=null&&e.title!=null?e.title:"Question Title");x.append(E);let L=e!=null&&e.description!=null?"questionDesc mb-2":"questionDesc mb-2 d-none",k=n("span",{class:L,id:"questionDescPreview"},e!=null&&e.description!=null?e.description:"no description");x.append(k);let N=n("div",{class:"ratio ratio-16x9 media-container d-none",id:"img-preview"});if(x.append(N),e!=null&&e.image!=null){$(N).removeClass("d-none");let g=n("img",{class:"media-item",src:`${public_route}/images/questions/${e.image}`});$(N).append(g)}let R=n("div",{class:"answers my-4",id:"answersContainerPreview"});x.append(R);let C=e!=null&&e.is_multi_select!=null&&e.is_multi_select==1?"btn btn-primary d-inline-block mt-3 ml-auto":"btn btn-primary d-inline-block mt-3 ml-auto d-none",P=n("button",{class:C,type:"button",id:"nextQuestionBtn"},__.Submit);x.append(P),A(s,"input","d-none","is-invalid"),A(u,"input","d-none"),Z(Q),e!=null&&e.id!=null?V(l,e.id):V(l),e!=null&&e.answers!=null?e.answers.forEach(g=>{z(++t,g)}):(z(++t),z(++t)),d.addEventListener("click",function(){z(++t)});var I=document.getElementById("answersContainer");new Sortable(I,{animation:150,handle:".answer-order-handler",ghostClass:"border-primary"}),$(f).on("drop",function(g){document.querySelectorAll("#answersContainer .answer").forEach(function(j,O){j.dataset.order=O+1})})}function pe(e=null){var t=0;let i=document.getElementById(H),a=n("div",{});i.append(a),attrs={type:"file",id:"imageInput",class:"d-none","data-target":"img-preview",accept:".jpg,.png,.jpeg"};let l=n("input",attrs);a.append(l);let o=n("p",{},__["Add Image:"]);a.append(o);let h=n("button",{type:"button",class:"btn btn-success",onclick:"imageInput.click()"},__["Upload Image"]);a.append(h);let s=n("button",{type:"button",id:"removeImage",class:e!=null&&e.image!=null?"btn btn-danger mx-2":"btn btn-danger mx-2 d-none"},'<i class="fa fa-trash"></i>');a.append(s);var u,c;{let O=n("div",{class:"my-3"});i.append(O);let D=n("label",{class:"mb-2",for:"ArQuestionTitleInput"},"question title *");O.append(D);var u=n("input",{type:"text",class:"form-control",id:"ArQuestionTitleInput",placeholder:"Enter A Title",maxlength:"200","data-target":"questionTitlePreview",value:e!=null?e.title:""});O.append(u);let M=n("div",{class:"mb-3"});i.append(M);let K=n("label",{class:"mb-2",for:"ArquestionDescInpiut"},"question description");M.append(K);var c=n("textarea",{class:"form-control",id:"ArquestionDescInpiut",placeholder:"Enter a Description",maxlength:"400","data-target":"questionDescPreview"},e!=null?e.description:"");M.append(c)}let m=n("div",{class:"mb-3"});i.append(m);let f=n("label",{class:"mb-2"},__["Answers:"]);m.append(f);let d=n("p",{class:"mb-2 small"},__["largest image size is: 2mb"]);m.append(d);let r=n("div",{class:"answers-order-container list-group",id:"answersContainer"});m.append(r);let w=n("button",{type:"button",id:"addAnswerBtn",class:"btn btn-secondary",placeholder:"Answer"},`${__["Add Answer"]} <i style="margin-left: 8px" class="fa fa-plus"></i>`);m.append(w);let b=n("div",{class:"mb-3"});i.append(b);let y=n("h5",{class:"title"},__.SETTING);b.append(y);let _=n("div",{class:"form-check form-switch p-0 my-4 d-flex gap-3"});b.append(_);let Q=n("label",{class:"form-check-label",for:"multiSelect"},__["Allow multiple choices:"]);_.append(Q);let T={class:"form-check-input mx-0 float-none",type:"checkbox",role:"switch",id:"multiSelect","data-target":"nextQuestionBtn"};e!=null&&e.is_multi_select!=null&&e.is_multi_select==1&&(T.checked=e.is_multi_select);let v=n("input",T);_.append(v);let x=document.getElementById(X),q=n("div",{class:"container-floued h-100"});x.append(q);let E=n("div",{class:"d-flex h-100 flex-column justify-content-center py-4 px-5 m-auto"});q.append(E);let L=e!=null&&e.title!=null?"question":"question d-none",k=n("span",{class:L,id:"questionTitlePreview"},e!=null&&e.title!=null?e.title:"Question Title");E.append(k);let N=e!=null&&e.description!=null?"questionDesc":"questionDesc d-none",R=n("span",{class:N,id:"questionDescPreview"},e!=null&&e.description!=null?e.description:"no description");E.append(R);let C=n("div",{class:"ratio ratio-16x9 media-container d-none",id:"img-preview"});if(E.append(C),e!=null&&(e.video!=null||e.image!=null)){let O,D;e!=null&&e.video!=null?(O="iframe",D=e.video):e!=null&&e.image!=null&&(O="img",D=`${public_route}/images/questions/${e.image}`);let G=n(O,{class:"media-item",src:D});C.append(G),$(C).removeClass("d-none")}let P=n("div",{class:"answers img-answers my-4",id:"answersContainerPreview"});E.append(P);let I=e!=null&&e.is_multi_select!=null&&e.is_multi_select==1?"btn mt-3 d-inline-block ml-auto":"btn mt-3 d-inline-block ml-auto d-none",g=n("button",{class:I,type:"button",id:"nextQuestionBtn"},__.Submit);E.append(g),A(u,"input","d-none","is-invalid"),A(c,"input","d-none"),Z(v),e!=null&&e.id!=null?V(l,e.id):V(l),e!=null&&e.answers!=null?e.answers.forEach(O=>{Y(++t,O)}):(Y(++t),Y(++t)),w.addEventListener("click",function(){Y(++t)});var j=document.getElementById("answersContainer");new Sortable(j,{animation:150,handle:".answer-order-handler",ghostClass:"border-primary"}),$(r).on("drop",function(O){document.querySelectorAll("#answersContainer .answer").forEach(function(D,G){D.dataset.order=G+1})})}function ce(e=null){let t=document.getElementById(H);$("#"+H).after(`<div id="sidebarOption" style="height: calc(100vh - 192px);overflow-y: auto;display: none">
      <button class="btn close-btn"><i class="fa fa-close"></i></button>
      <div class="my-3">
        <div id="filed-inputs-box"></div>
        <div class="px-3">
          <button id="save-field-btn" class="btn btn-primary save-btn w-100">${__.save} <i class="fa fa-save"></i></button>
        </div>
      </div>
    </div>`);let i=n("ul",{class:"nav nav-tabs w-100"});t.append(i);let a=n("li",{class:"nav-link w-50 text-center option-link","data-option":"image",id:"image-link"},__.Image);i.append(a);let l=n("div",{class:"option-container py-3 px-2 bg-white border border-top-0",id:"image-option"});t.append(l);let o=n("input",{class:"d-none",type:"file",id:"imageInput",accept:".jpg,.png,.jpeg","data-target":"img-preview"});l.append(o);let h=n("button",{type:"button",class:"btn btn-success",onclick:"imageInput.click()"},__["Upload Image"]);l.append(h),l.append(n("button",{type:"button",id:"removeImage",class:e!=null&&e.image!=null?"btn btn-danger mx-2":"btn btn-danger mx-2 d-none"},'<i class="fa fa-trash"></i>'));let s=n("li",{class:"nav-link w-50 text-center option-link","data-option":"video",id:"video-link"},__.Video);i.append(s);let u=n("div",{class:"option-container py-3 px-2 bg-white border border-top-0",id:"video-option"});t.append(u);let c=n("label",{class:"form-label",for:"video_url_input"},__["Video URL:"]);u.append(c);let m=n("div",{class:"d-flex gap-2"});u.append(m);let f=n("input",{class:"form-control",type:"url","data-target":"img-preview",placeholder:__["Enter A Youtube Video URL"],id:"video_url_input"});m.append(f);let d=n("button",{class:"btn btn-danger delete-value-url p-2",onclick:"video_url_input.value = '';"},"<i class='fa fa-trash fa-lg fa-fw'></i>");m.append(d);var r,w,b,y,_,Q;{let p=n("div",{class:"my-3"});t.append(p);let B=n("label",{class:"mb-2 form-label",for:"ArQuestionTitleInput"},"Title:");p.append(B);var r=n("input",{type:"text",class:"form-control",id:"ArQuestionTitleInput",placeholder:"Enter A Title",maxlength:"200","data-target":"questionTitlePreview",value:e!=null?e.title:""});p.append(r);let U=n("div",{class:"mb-3"});t.append(U);let te=n("label",{class:"mb-2 form-label",for:"ArquestionDescInpiut"},"Text Description");U.append(te);var w=n("textarea",{class:"form-control",id:"ArquestionDescInpiut",placeholder:"Enter a Description",maxlength:"400","data-target":"questionDescPreview"},e!=null?e.description:"");U.append(w);let ne=n("div",{class:"mb-3"});t.append(ne),ne.append(n("label",{class:"form-label",for:"ArQuestionButtonLabel"},"Button Label:"));var b=n("input",{class:"form-control",placeholder:__.submit,type:"text",id:"ArQuestionButtonLabel","data-target":"nextQuestionBtn",value:e!=null&&e.button_label!=null&&e.button_label.length>0?e.button_label:""});ne.append(b)}let T=n("div",{class:"mb-3"});t.append(T);let v=n("div",{class:"content-items row items mt-3 mb-4"});T.append(v),[{id:1,type:"text",name:"first_name",title:__["First Name"],icon:"fa fa-user"},{id:2,type:"text",name:"last_name",title:__["Last Name"],icon:"fa fa-user"},{id:3,type:"email",name:"email",title:__.Email,icon:"fa fa-envelope"},{id:4,type:"number",name:"phone_number",title:__["Phone Number"],icon:"fa fa-phone"},{id:5,type:"textarea",name:"long_answer",title:__["Long Answer"],icon:"fa fa-bars"},{id:6,type:"text",name:"short_answer",title:__["Short Answer"],icon:"fa fa-align-center"},{id:7,type:"checkbox",name:"checkbox",title:__.Checkbox,icon:"fa fa-check-square-o"},{id:8,type:"select",name:"dropdown",title:__.Dropdown,icon:"fa fa-caret-square-o-down"}].forEach(p=>{$(v).append(`
      <div class="col-6 px-1 mb-2">
        <div class="item card flex-row draggable-field py-1" draggable="true" data-type="${p.id}" data-name="${p.title}">
          <div class="icon-bg py-1 px-3 d-flex align-items-center justify-content-center">
            <i class="${p.icon}"></i>
          </div>
          <div class="card-body py-2 px-2">
            <h6 class="card-title m-0">${p.title}</h6>
          </div>
        </div>
      </div>
    `)});let q=n("div",{class:"mb-3"});t.append(q);let E=n("h5",{class:"title"},__["Settings:"]);q.append(E);let L=n("div",{class:"form-check form-switch p-0 my-4 d-flex gap-3"});q.append(L);let k=n("label",{class:"form-check-label",for:"isSkippableCheckbox"},__["Enable skip form option:"]);L.append(k);let N={class:"form-check-input mx-0 float-none",type:"checkbox",role:"switch",id:"isSkippableCheckbox","data-target":"isSkippable"};e!=null&&e.is_skippable!=null&&e.is_skippable==1&&(N.checked=!0);let R=n("input",N);L.append(R);let C=n("div",{class:"form-check form-switch p-0 my-4 d-flex gap-3"});q.append(C);let P=document.getElementById(X),I=n("div",{class:"container-floued h-100"});P.append(I);let g=n("div",{class:"d-flex h-100 flex-column justify-content-center py-4 px-5 m-auto"});I.append(g);let j=e!=null&&e.title!=null?"question":"question d-none",O=n("span",{class:j,id:"questionTitlePreview"},e!=null&&e.title!=null?e.title:"Text Title");g.append(O);let D=e!=null&&e.description!=null?"questionDesc":"questionDesc d-none",G=n("span",{class:D,id:"questionDescPreview"},e!=null&&e.description!=null?e.description:"Text Description");g.append(G);let M=n("div",{class:"ratio ratio-16x9 media-container d-none",id:"img-preview"});if(g.append(M),e!=null&&(e.video!=null||e.image!=null)){let p,B;e!=null&&e.video!=null?(p="iframe",B=e.video):e!=null&&e.image!=null&&(p="img",B=`${public_route}/images/questions/${e.image}`);let J=n(p,{class:"media-item",src:B});M.append(J),$(M).removeClass("d-none")}let K=n("div",{class:"alert alert-primary d-flex flex-column gap-2 fields d-none",style:"border-style: dashed",id:"fields-holder-preview"});g.append(K),e!=null&&e.fields!=null&&e.fields.length>0&&e.fields.forEach((p,B)=>{let J={count:B+1,type:parseInt(p.type),label:p.label,id:p.id,placeholder:p.placeholder??"",is_required:p.is_required??"",en_label:p.en_label??"",en_placeholder:p.en_placeholder??"",is_multiple_chooseing:p.is_multiple_chooseing??"",hiddar_value:p.value??""};p.type=parseInt(p.type),p.type==3&&(J.is_lead_email=p.is_lead_email??0),[7,8].includes(p.type)&&(J.options=[],p.options!=null&&p.options.length>0&&p.options.forEach(U=>{J.options.push(U.value)})),he(J)}),$(K).find(".field").length>0?$(K).removeClass("d-none"):$(K).addClass("d-none");let oe={class:"ml-auto mt-2"};LANG=="ar"&&(oe.class="ml-auto mt-2 d-flex flex-row-reverse");let ee=n("div",oe),se={class:"btn ml-auto",id:"isSkippable"};$(R).prop("checked")||(se.class+=" d-none ");let ve=n("button",se,__.skip);ee.append(ve);let xe=n("button",{class:"btn btn-primary d-inline-block mt-3 ml-auto",type:"button",id:"nextQuestionBtn"},e!=null&&e.button_label!=null?e.button_label:__.submit);ee.append(xe),g.append(ee),A(r,"input","d-none","is-invalid"),A(w,"input","d-none"),A(b,"input","d-none"),typeof y<"u"&&A(y,"input","d-none","is-invalid"),typeof _<"u"&&A(_,"input","d-none"),typeof Q<"u"&&A(Q,"input","d-none"),Z(R),e!=null&&e.id!=null?V(o,e.id):V(o),we(f),$("#modal_sidebar .nav-tabs .option-link").each(function(p){$(this).click(function(){$(this).addClass("active").siblings().removeClass("active"),$(this).addClass("active").siblings().each(function(B){$(`#${$(this).data("option")}-option`).addClass("d-none")}),$(`#${$(this).data("option")}-option`).removeClass("d-none")}),$(`#${$(this).data("option")}-option`).removeClass("active").addClass("d-none")}),e!=null&&e.image!=null?($("#image-option").removeClass("d-none"),$("#image-link").addClass("active")):e!=null&&e.video!=null?($("#video-option").removeClass("d-none"),$("#video-link").addClass("active"),$("#video_url_input").val(e.video)):($("#image-option").removeClass("d-none"),$("#image-link").addClass("active")),$(".content-items .draggable-field").each(function(){$(this).on("dragstart",function(p){let J={field_id:$(this).data("type")};p.originalEvent.dataTransfer.setData("text",JSON.stringify(J))})}),$(".test-preview").on("dragover",function(p){p.preventDefault()}),$(".test-preview").on("drop",function(p){p.preventDefault();var B=p.originalEvent.dataTransfer.getData("text");be(B)&&(B=JSON.parse(B),B.field_id!=null&&($("#fields-holder-preview").find(".alert").remove(),ge(B.field_id)))});var ye=document.getElementById("fields-holder-preview");new Sortable(ye,{animation:150,handle:".handler-field",ghostClass:"active"}),$("#fields-holder-preview").on("drop",function(p){let B=p.originalEvent.dataTransfer.getData("text");if(!be(B)){let J=[];document.querySelectorAll("#fields-holder-preview .field").forEach(function(U,te){U.dataset.order=te+1,U.querySelector(".order b").innerText=U.dataset.order,J.push({id:U.dataset.id,order:U.dataset.order})})}}),$("#sidebarOption .close-btn").on("click",function(p){p.preventDefault(),$("#save-field-btn").off("click"),$("#modal_sidebar").show(),$("#sidebarOption").hide()}),$("#modal_sidebar .option-link.active").each(function(){$("#"+$(this).data("target")).show().siblings(".option-page").hide()})}function ue(e=null){let t=document.getElementById(H),i=n("div",{});t.append(i);let a=n("ul",{class:"nav nav-tabs w-100"});t.append(a);let l=n("li",{class:"nav-link w-50 text-center option-link","data-option":"image",id:"image-link"},__.Image);a.append(l);let o=n("div",{class:"option-container py-3 px-2 bg-white border border-top-0",id:"image-option"});t.append(o);let h=n("input",{class:"d-none",type:"file",id:"imageInput",accept:".jpg,.png,.jpeg","data-target":"img-preview"});o.append(h);let s=n("button",{type:"button",class:"btn btn-success",onclick:"imageInput.click()"},__["Upload Image"]);o.append(s),o.append(n("button",{type:"button",id:"removeImage",class:e!=null&&e.image!=null?"btn btn-danger mx-2":"btn btn-danger mx-2 d-none"},'<i class="fa fa-trash"></i>'));let u=n("li",{class:"nav-link w-50 text-center option-link","data-option":"video",id:"video-link"},__.Video);a.append(u);let c=n("div",{class:"option-container py-3 px-2 bg-white border border-top-0",id:"video-option"});t.append(c);let m=n("label",{class:"form-label",for:"video_url_input"},__["Video URL:"]);c.append(m);let f=n("input",{class:"form-control",type:"url","data-target":"img-preview",placeholder:__["Enter A Youtube Video URL"],id:"video_url_input"});c.append(f);var d,r,w,b,y,_;{let C=n("div",{class:"my-3"});t.append(C);let P=n("label",{class:"mb-2",for:"ArQuestionTitleInput"},"Title: *");C.append(P);var d=n("input",{type:"text",class:"form-control",id:"ArQuestionTitleInput",placeholder:"Enter A Title",maxlength:"200","data-target":"questionTitlePreview",value:e!=null?e.title:""});C.append(d);let g=n("div",{class:"mb-3"});t.append(g);let j=n("label",{class:"mb-2",for:"ArquestionDescInpiut"},"Text Description");g.append(j);var r=n("textarea",{class:"form-control",id:"ArquestionDescInpiut",placeholder:"Enter a Description",maxlength:"400","data-target":"questionDescPreview"},e!=null?e.description:"");g.append(r);let D=n("div",{class:"my-3"});t.append(D);let G=n("label",{class:"mb-2",for:"ArQuestionTitleInput"},__["Button: *"]);D.append(G);var w=n("input",{type:"text",class:"form-control",id:"ArQuestionButtonLabel",maxlength:"40",placeholder:"Button Label","data-target":"nextQuestionBtn",value:e!=null&&e.button_label!=null?e.button_label:""});D.append(w)}let Q=document.getElementById(X),T=n("div",{class:"container-floued h-100"});Q.append(T);let v=n("div",{class:"d-flex h-100 flex-column justify-content-center py-4 px-5 m-auto"});T.append(v);let x=e!=null&&e.title!=null?"question":"question d-none",q=n("span",{class:x,id:"questionTitlePreview"},e!=null&&e.title!=null?e.title:"Text Title");v.append(q);let E=e!=null&&e.description!=null?"questionDesc":"questionDesc d-none",L=n("span",{class:E,id:"questionDescPreview"},e!=null&&e.description!=null?e.description:"Text Description");v.append(L);let k=n("div",{class:"ratio ratio-16x9 media-container",id:"img-preview"});if(v.append(k),e!=null&&(e.video!=null||e.image!=null)){let C,P;e!=null&&e.video!=null?(C="iframe",P=e.video):e!=null&&e.image!=null&&(C="img",P=`${public_route}/images/questions/${e.image}`);let I=n(C,{class:"media-item",src:P});k.append(I),$(k).removeClass("d-none")}let N=e!=null&&e.button_label!=null?"btn btn-primary d-inline-block mt-3 ml-auto":"btn btn-primary d-inline-block mt-3 ml-auto d-none",R=n("button",{class:N,type:"button",id:"nextQuestionBtn"},e!=null&&e.button_label!=null?e.button_label:"");v.append(R),A(d,"input","d-none","is-invalid"),A(r,"input","d-none"),A(w,"input","d-none","is-invalid"),typeof b<"u"&&A(b,"input","d-none","is-invalid"),typeof y<"u"&&A(y,"input","d-none"),typeof _<"u"&&A(_,"input","d-none","is-invalid"),e!=null&&e.id!=null?V(h,e.id):V(h),we(f),$("#modal_sidebar .nav-tabs .option-link").each(function(C){$(this).click(function(){$(this).addClass("active").siblings().removeClass("active"),$(this).addClass("active").siblings().each(function(P){$(`#${$(this).data("option")}-option`).addClass("d-none")}),$(`#${$(this).data("option")}-option`).removeClass("d-none")}),$(`#${$(this).data("option")}-option`).removeClass("active").addClass("d-none")}),e!=null&&e.image!=null?($("#image-option").removeClass("d-none"),$("#image-link").addClass("active"),$("#imageName").parent().removeClass("d-none"),$("#imageName").text(e.image)):e!=null&&e.video!=null?($("#video-option").removeClass("d-none"),$("#video-link").addClass("active"),$("#video_url_input").val(e.video)):($("#image-option").removeClass("d-none"),$("#image-link").addClass("active")),$("#modal_sidebar .option-link").click(function(){$(this).addClass("active").siblings(".option-link").removeClass("active"),$("#"+$(this).data("target")).show().siblings(".option-page").hide()}),$("#modal_sidebar .option-link.active").each(function(){$("#"+$(this).data("target")).show().siblings(".option-page").hide()})}function me(e=null){let t=document.getElementById(H),i=n("div",{});t.append(i),attrs={type:"file",id:"imageInput",class:"d-none","data-target":"img-preview",accept:".jpg,.png,.jpeg"};let a=n("input",attrs);i.append(a),i.append(n("p",{},__["Add Image:"])),i.append(n("button",{type:"button",class:"btn btn-success",onclick:"imageInput.click()"},__["Upload Image"])),i.append(n("button",{type:"button",id:"removeImage",class:e!=null&&e.image!=null?"btn btn-danger mx-2":"btn btn-danger mx-2 d-none"},'<i class="fa fa-trash"></i>'));let l=n("div",{class:"my-3"});t.append(l),l.append(n("label",{class:"mb-2",for:"ArQuestionTitleInput"},"question title *"));var o=n("input",{type:"text",class:"form-control",id:"ArQuestionTitleInput",placeholder:"Enter A Title",maxlength:"400","data-target":"questionTitlePreview",value:e!=null?e.title:__["question title"]});l.append(o);let h=n("div",{class:"mb-3"});t.append(h),h.append(n("label",{class:"mb-2",for:"ArquestionDescInpiut"},"question description"));var s=n("textarea",{class:"form-control",id:"ArquestionDescInpiut",placeholder:"Enter a Description",maxlength:"400","data-target":"questionDescPreview"},e!=null?e.description:__["question description"]);h.append(s);let u=n("div",{class:"mb-3"});t.append(u),u.append(n("label",{for:"answer_equation"},__["correct answer equation"]+":"));let c=n("div",{id:"answer_equation",style:"direction: ltr"});u.append(c);let m=new Guppy("answer_equation");e!=null&&e.answers!=null&&e.answers[0]!=null&&(m.engine.set_content(e.answers[0].text),m.render(!0));let f=n("div",{class:"mb-3"});t.append(f),f.append(n("label",{for:"answer_decimals"},__["answer decimals"]+":")),f.append(n("input",{type:"number",class:"form-control",id:"answer_decimals",placeholder:"required decimals",value:e!=null&&e.answers!=null&&e.answers[0]!=null?e.answers[0].decimals:""})),t.append(n("hr",{}));let d=n("div",{class:"mb-3",id:"equation-variables-container"});t.append(d),e!=null&&e.equation_variables!=null&&e.equation_variables.forEach(x=>{re(x.title,x)});let r=n("div",{class:"mb-3"});t.append(r),r.append(n("label",{for:"questionScoreInput"},__.score+":")),r.append(n("input",{class:"form-control",id:"questionScoreInput",type:"number",value:e!=null&&e.answers!=null&&e.answers[0]!=null&&e.answers[0].score!=null?e.answers[0].score:""}));let w=n("div",{class:"mb-3 form-check form-switch p-0 my-4 d-flex gap-3"});t.append(w),w.append(n("label",{class:"form-check-label",for:"is_skippable"},__["Enable Skip Question"]+":"));let b={class:"form-check-input mx-0 float-none",type:"checkbox",role:"switch",id:"is_skippable","data-target":"isSkippableBtn"};e!=null&&e.is_skippable!=null&&e.is_skippable==1&&(b.checked=e.is_skippable);let y=n("input",b);w.append(y);let _=document.getElementById(X),Q=n("div",{class:"container-floued h-100"});_.append(Q);let T=n("div",{class:"d-flex h-100 flex-column justify-content-center py-4 px-5 m-auto"});Q.append(T),T.append(n("span",{class:"question",id:"questionTitlePreview"},e!=null&&e.title!=null?e.title:__["question title"])),T.append(n("span",{class:"questionDesc mb-2",id:"questionDescPreview"},e!=null&&e.description!=null?e.description:__["question description"]));let v=n("div",{class:"ratio ratio-16x9 media-container d-none",id:"img-preview"});if(T.append(v),e!=null&&e.image!=null){$(v).removeClass("d-none");let x=n("img",{class:"media-item",src:`${public_route}/images/questions/${e.image}`});$(v).append(x)}T.append(n("textarea",{placeholder:__["enter you answer here"],class:"form-control mt-2",style:"max-width: 500px;"})),T.append(n("button",{type:"button",id:"isSkippableBtn",class:e!=null&&e.is_skippable!=null&&e.is_skippable==1?"btn w-fit mt-3 ml-auto":"btn w-fit mt-3 ml-auto d-none"},__.skip)),A(o,"input","d-none","is-invalid"),A(s,"input","d-none"),Z(y),$(s).on("input",function(){let x=new Set($(this).val().match(/\[[^\s]+\]/g));x!=null&&x.size>0&&x.forEach(q=>{document.getElementById("variable-"+q)||re(q)}),$("#equation-variables-container .variable").each(function(){x.has($(this).data("var"))||$(this).fadeOut(300,function(){$(this).remove()})})}),e!=null&&e.id!=null?V(a,e.id):V(a)}function fe(e=null){let t=document.getElementById(H),i=n("div",{});t.append(i);let a=n("ul",{class:"nav nav-tabs w-100 mt-3"});if(t.append(a),e==null){let f=n("li",{class:"nav-link score-link w-50 text-center active","data-target":"select-certificate"},__.select);a.append(f);var l=n("div",{class:"border border-top-0 my-0 mb-3 pt-2 px-2 score-page",id:"select-certificate"});t.append(l);let d=n("select",{class:"form-control mb-2",id:"availableCertificates"});l.append(d),availableCertificates.length>0?(availableCertificates.forEach(r=>{d.append(n("option",{value:r.id},r.title))}),$(d).on("input",function(){ie($(this).val())})):d.append(n("option",{value:""},__["-- no options --"]))}let o={class:"w-50",text:__.create};e!=null&&(o={class:"w-100 active",text:__.edit});let h=n("li",{class:"nav-link score-link text-center px-1 "+o.class,"data-target":"create-certificate"},o.text);a.append(h);let s=n("div",{class:"border border-top-0 my-0 mb-3 pt-2 px-2 score-page",style:"display: none",id:"create-certificate",dir:"rtl"});e!=null&&(s.style=""),t.append(s);let u=n("div",{class:"my-3"});s.append(u),u.append(n("label",{class:"mb-2",for:"certificateTitleInput"},"certificate title *")),u.append(n("input",{type:"text",class:"form-control",id:"certificateTitleInput",placeholder:"Enter A Title",maxlength:"200",value:e!=null?e.title:""}));let c=n("div",{class:"my-3"});s.append(c),c.append(n("label",{class:"mb-2",for:"certificateDescriptionInput"},__["certificate description"]+" :")),c.append(n("textarea",{class:"form-control",id:"certificateDescriptionInput",placeholder:"Enter A Description",rows:5},e!=null?e.description:"")),s.append(n("label",{class:"mb-1",for:"certificateTheme"},"Theme *"));let m=n("select",{class:"form-control mb-2",id:"certificateTheme"});m.append(n("option",{value:""},__.select)),certificatesTypes.forEach(f=>{let d={value:f};e!=null&&e.template!=null&&e.template==f&&(d.selected=!0),m.append(n("option",d,f))}),s.append(m),$(m).on("input",function(){_e($(m).val())}),$("#modal_sidebar .score-link").click(function(){$(this).addClass("active").siblings(".score-link").removeClass("active"),$("#"+$(this).data("target")).show().siblings(".score-page").hide()}),availableCertificates.length>0?e!=null?ie(e.id):ie($("#availableCertificates").val()):_e("default")}function ae(e,t=null){let i=n("div",{class:"input-holder d-flex gap-2"}),a={type:"text",class:"form-control",placeholder:__["Please add an option"]};t!=null&&(a.value=t),$(i).append(n("input",a,""));let l=n("button",{type:"button",class:"btn bg-white border create-option-btn"},"<i class='fa fa-plus'></i>");$(i).append(l),$(l).click(function(){$(".options-holder .input-holder").length>0&&ae(e)});let o=n("button",{type:"button",class:"btn bg-danger text-white border delete-option-btn"},"<i class='fa fa-trash'></i>");$(i).append(o),$(o).click(function(){$(".options-holder .input-holder").length>1&&i.remove()}),$(e).append(i)}function ge(e,t=null){e=parseInt(e),$("#filed-inputs-box").html(""),$("#save-field-btn").off("click");let i=n("div",{class:"px-3 mb-3"});if($(i).append(n("label",{class:"form-label",for:"label-input"},__["Label:"])),$(i).append(n("input",{type:"text",class:"form-control mb-2",id:"label-input",value:t!=null&&t.label!=null?t.label:e==1?__["First Name"]:e==2?__["Last Name"]:e==3?__["Email address"]:e==4?__["Phone number"]:e==5?__["Long answer"]:e==6?__["Short answer"]:e==7?__.Checkbox:__.Dropdown,placeholder:__["enter a label"]},"")),[1,2,3,4,5,6,8].includes(e)&&($(i).append(n("label",{class:"form-label",for:"input-placeholder"},__.Placeholder)),$(i).append(n("input",{type:"text",class:"form-control mb-2",id:"input-placeholder",value:t!=null&&t.placeholder!=null?t.placeholder:"",placeholder:__["Enter a Placeholder"]}))),[7,8].includes(e)){e==7&&$(i).append(n("label",{class:"form-label",for:"input-placeholder"},__["Checkbox options:"])),e==8&&$(i).append(n("label",{class:"form-label",for:"input-placeholder"},__["Dropdown options:"]));var a=n("div",{class:"d-flex flex-column gap-2 options-holder"});$(i).append(a),t!=null&&t.options!=null&&t.options.length>0?t.options.forEach(l=>{ae(a,l)}):ae(a)}if(e==7){let l=n("div",{class:"my-2"});$(l).append(n("label",{class:"form-label",for:"input-is-multiple"},__["Allow multiple choices:"]));let o={type:"checkbox",class:"form-check-input m-2",id:"input-is-multiple"};t!=null&&t.is_multiple_chooseing!=null&&t.is_multiple_chooseing==1&&(o.checked=!0),$(l).append(n("input",o)),$(i).append(l)}if(e==3){let l=$('.fields .field[data-type="3"]').length==0||t!=null&&t.is_lead_email!=null&&t.is_lead_email==1;$(i).append(`<div class="d-block my-2">
        <label for="is_lead_email" class="form-label">${__["Make this field lead email field"]}:</label>
        <input type="checkbox" id="is_lead_email" class="form-check-input m-2" ${l?"checked disabled":""}>
      </div>`)}if([1,2,3,4,5,6,7,8].includes(e)){$(i).append(n("label",{class:"form-label",for:"input-is_required"},__["Field Is Required"]));let l={type:"checkbox",class:"form-check-input m-2",id:"input-is_required",placeholder:__["Enter a Placeholder"]};t!=null&&t.is_required!=null&&t.is_required==1&&(l.checked=!0),e==3&&($('.fields .field[data-type="3"]').length==0||t!=null&&t.is_lead_email!=null&&t.is_lead_email==1)&&(l.checked=!0,l.disabled=!0),$(i).append(n("input",l))}$("#filed-inputs-box").append(i),e==3&&$("#is_lead_email").on("change",function(){$(this).prop("checked")?($("#input-is_required").prop("checked",!0),$("#input-is_required").prop("disabled",!0)):$("#input-is_required").prop("disabled",!1)}),$("#modal_sidebar").hide(),$("#sidebarOption").show(),t!=null&&t.id!=null?$("#save-field-btn").click(function(){let l=document.querySelector(`#${t.id}`);if(l.dataset.title=$("#label-input").val(),[1,2,3,4,5,6,8].includes(e)&&(l.dataset.placeholder=$("#input-placeholder").val()),e==3&&(l.dataset.is_lead_email=$("#is_lead_email").prop("checked")==!0?1:0),[7,8].includes(e))if(e==7&&(l.dataset.is_multiple_chooseing=$("#input-is-multiple").prop("checked")==!0?1:0),$(l).find(".option-input").remove(),$(".options-holder .input-holder").length>1)if($(".options-holder .input-holder input").first().val().length>0)$(".options-holder .input-holder").each(function(){$(l).append(n("input",{class:"option-input",type:"hidden",value:$(this).find("input").first().val()}))});else return $(".options-holder .error").length==0&&$(".options-holder").append(n("div",{class:"alert alert-danger error"},"no options")),null;else return $(".options-holder .error").length==0&&$(".options-holder").append(n("div",{class:"alert alert-danger error"},__["no options"])),null;$(l).find(`#${t.id}-title`).text($("#label-input").val()),$(this).off("click"),$("#filed-inputs-box").html(""),$("#modal_sidebar").show(),$("#sidebarOption").hide(),$("#fields-holder-preview").find(".field").length>0?$("#fields-holder-preview").removeClass("d-none"):$("#fields-holder-preview").addClass("d-none")}):$("#save-field-btn").click(function(){if($("#label-input").val().length>0){let l={count:$("#fields-holder-preview .field").length+1,type:e,label:$("#label-input").val()};if([1,2,3,4,5,6,8].includes(e)&&(l.placeholder=$("#input-placeholder").val()),e==3&&(l.is_lead_email=$("#is_lead_email").prop("checked")==!0?1:0),e==7&&(l.is_multiple_chooseing=$("#input-is-multiple").prop("checked")==!0?1:0),[7,8].includes(e))if(l.options=[],$(".options-holder .input-holder").length>1)if($(".options-holder .input-holder input").first().val().length>0)$(".options-holder .input-holder").each(function(){l.options.push($(this).find("input").first().val())});else return $(".options-holder .error").length==0&&$(".options-holder").append(n("div",{class:"alert alert-danger error"},"no options")),null;else return $(".options-holder .error").length==0&&$(".options-holder").append(n("div",{class:"alert alert-danger error"},__["no options"])),null;he(l),$("#filed-inputs-box").html(""),$("#modal_sidebar").show(),$("#sidebarOption").hide(),$(this).off("click"),$("#fields-holder-preview").find(".field").length>0?$("#fields-holder-preview").removeClass("d-none"):$("#fields-holder-preview").addClass("d-none")}else $("#label-input").addClass("is-invalid")})}function n(e,t,i=""){if(e==!1)return!1;let a=document.createElement(e);for(var l in t)a.setAttribute(l,t[l]);return a.innerHTML=i,a}function A(e,t="input",i=!1,a=""){let l=document.getElementById(e.dataset.target);e.addEventListener(t,function(){l.innerText=this.value,i!=!1&&(this.value.length>0?(this.className=this.className.replace(a,""),l.className=l.className.replace(i,"")):(this.className=this.className+" "+a,l.className=l.className+" "+i))})}function Z(e){let t=document.getElementById(e.dataset.target);e.addEventListener("input",function(){e.checked?t.classList.remove("d-none"):t.classList.add("d-none")})}function V(e,t=!1){let i=$("#"+e.dataset.target),a=$("#removeImage");a.click(function(){e.value="",i.addClass("d-none").html(""),a.addClass("d-none"),t&&$.ajax({type:"POST",method:"POST",url:`${question_ajax_route}/${t}/image_actions`,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{action:"remove"},success:function(l){console.log("Image Uploaded (:")},error:function(l){console.error("something went wrong :("),l.responseJSON.errors.question_title!=null&&l.responseJSON.errors.question_title[0]!=null&&($("#ArQuestionTitleInput").addClass("is-invalid"),$("<div class='invalid-feedback'>"+l.responseJSON.errors.question_title[0]+"</div>").insertAfter("#ArQuestionTitleInput"))}})}),e.addEventListener("input",function(){const[l]=this.files;l&&(a.removeClass("d-none"),i.removeClass("d-none").html($("<img class='media-item' src='"+URL.createObjectURL(l)+"'>")))})}function we(e){let t=$("#"+e.dataset.target);e.addEventListener("input",function(){let i=new URL($(e).val()),l=new URLSearchParams(i.search).get("v"),o=$(e).val();l&&(o=`https://www.youtube.com/embed/${l}`),$(e).val().length>0&&["www.youtube.com","youtube.com","youtube-nocookie.com","youtu.be","www.youtube-nocookie.com"].includes(i.hostname)?(t.removeClass("d-none"),t.html(`
          <iframe
              width="800"
              height="400"
              src="${o}"
              title="YouTube video player"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen></iframe>
        `)):t.addClass("d-none")})}function le(e){let t=document.getElementById(e.dataset.target);e.addEventListener("input",function(){t.innerText=e.value,e.value.length>0?t.parentElement.classList.remove("d-none"):t.parentElement.classList.add("d-none")})}function _e(e){let t=$("#modal_preview"),i=n("div",{class:"certificate-preview-box container-fluid"});t.html(i),$.ajax({method:"GET",url:certificate_theme_route+"/"+e,success:function(a){$(i).html(a),$("#certificateTitleInput").off("input"),$("#certificateTitleInput").on("input",function(){$("#certificate-title").text($(this).val())}),$("#certificateDescriptionInput").off("input"),$("#certificateDescriptionInput").on("input",function(){console.log($(this).val()),$("#certificate-desc").text($(this).val())})},error:function(a){console.error(a)}})}function ie(e){let t=$("#modal_preview"),i=n("div",{class:"certificate-preview-box container-fluid"});t.html(i),$.ajax({method:"GET",url:certificate_show_route+"/"+e,success:function(a){$(i).html(a),$("#certificateTitleInput").off("input"),$("#certificateTitleInput").on("input",function(){$("#certificate-title").text($(this).val())}),$("#certificateDescriptionInput").off("input"),$("#certificateDescriptionInput").on("input",function(){console.log($(this).val()),$("#certificate-desc").text($(this).val())})},error:function(a){console.error(a)}})}function be(e){let t=typeof e!="string"?JSON.stringify(e):e;try{return t=JSON.parse(t),!0}catch{return!1}}function S(e){let t=Date.now(),i=`<div id="${t}" class="action-alert alert position-absolute alert-success d-flex align-items-center mb-0" role="alert">
    <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"/></svg>
    <div>
      ${e}
    </div>
  </div>`;$("#alerts").append(i);var a=document.getElementById(t);return new bootstrap.Alert(a)}function F(e){let t=Date.now(),i=`<div id="${t}" class="action-alert alert position-absolute alert-danger d-flex align-items-center" role="alert">
      <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg>
    <div>
      ${e}
    </div>
  </div>`;$("#alerts").append(i);var a=document.getElementById(t);return new bootstrap.Alert(a)}
